/*
 Copyright (c) 2003-2016, CKSource - Frederico Knabben. All rights reserved.
 For licensing, see LICENSE.md or http://ckeditor.com/license
*/
CKEDITOR.dialog.add("video",function(e){return{title:e.lang.video.title,minWidth:270,minHeight:120,contents:[{id:"video",label:e.lang.video.title,elements:[{type:"select",id:"videotype","default":"youtube",label:RinEditor["Video Type:"],items:[[RinEditor.Youtube,"youtube"],[RinEditor.Dailymotion,"dailymotion"],[RinEditor.Vimeo,"vimeo"],[RinEditor.Streamable,"streamable"]]},{type:"text",id:"videolink",label:RinEditor["Video URL:"],"default":""}]}],onOk:function(){var d=this.getValueOf("video","videolink"),
c=this.getValueOf("video","videotype");if("youtube"==c)var b=d,a=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=)([^#\&\?]*).*/,b=(a=b.match(a))&&11==a[2].length?a[2]+"?html5\x3d1":b.replace(/^[^v]+v.(.{11}).*/,"$1")+"?html5\x3d1";"vimeo"==c&&(b=d,a=/http(s)?:\/\/(www\.)?vimeo.com\/(\d+)($|\/)/,(a=b.match(a))&&a[3]&&(b=a[3]));"dailymotion"==c&&(b=d,(a=b.match("/video/([^_]+)/?"))&&a[1]&&(b=a[1]));"streamable"==c&&(b=d,a=/http(s)?:\/\/(www\.)?streamable.com\/([^/]*)/,(a=b.match(a))&&a[3]&&(b=a[3]));
b&&MyBBEditor.insertText("["+c+"]"+b+"[/"+c+"]","",""+e.name+"_2")}}});